@model TaskQuest.ViewModels.GrupoViewModel

@{
    ViewBag.Title = "Grupo";
}

@section css
{
	<link rel="stylesheet" href="~/Content/css/grupo.css">
	<link rel="stylesheet" href="~/Content/css/spectrum.css">
	<link rel="stylesheet" href="~/Content/css/jquery-ui.css">	
}

@section js
{
	<script src="~/Content/js/spectrum.js"></script>
	<script src="~/Content/js/canvas/canvasjs.min.js"></script>
	<script src="~/Content/js/graphics.js"></script>
	<script src="~/Content/js/spectrum.config.js"></script>
	<script src="~/Content/js/jquery-ui/jquery-ui.js"></script>
	<script src="~/Content/js/tabs.js"></script>
	<script src="~/Content/js/jquery.validate.js"></script>
	<script src="~/Content/js/grupo.js"></script>	
    <script src="~/Content/js/link.js"></script>
}

<section class="pads-bot">

	<div class="flex-properties-r">
		<div class="title-a"><h2>Grupo</h2></div>
		<div class="title-b">
			<div class="flex-properties-r pads icon-black">
				@Html.Partial("_LinkPartial", Html.LinkViewModel("CriarQuest", Model.Grupo.Id.ToString(), "/Quest/CriarQuest"))
                <a onclick="link('CriarQuest')"><i class="fa fa-plus elipse" aria-hidden="true"></i></a>
                <h3><a onclick="link('CriarQuest')">Criar Quest</a></h3>
			</div>
			<div class="flex-properties-r pads icon-black">
				<a href="Inicio.html"><i class="fa fa-times elipse" aria-hidden="true"></i></a>
				<h3><a href="Inicio.html">Excluir Grupo</a></h3>
			</div>
		</div>
	</div>

</section>

<section>
	<div class="container">
		<div id="chartContainer"></div>
	</div>
</section>

<hr class="container quebra">

<section class="container flex-properties-g">
	<div>
		<div class="grupo-elipse tory-blue-bg"><img src="img/groupicon.png"></div>
	</div>
	<div><h3>@Model.Grupo.Nome</h3></div>
    @if (@Model.Integrantes.Count == 1)
    {
        <div><h3>@Model.Integrantes.Count Integrante</h3></div>
    }
    else
    {
        <div><h3>@Model.Integrantes.Count Integrantes</h3></div>
    }
	<div><i class="fa fa-plus" aria-hidden="true" data-target="#modalAdicionarIntegrante" data-toggle="modal"></i></div>
</section>

<hr class="container quebra">

<section class="container">
	<div id="tabs">
		<ul>
			<li><a href="#integrantes">Integrantes</a></li>
			<li><a href="#quests">Quests</a></li>
		</ul>
        <div id="integrantes">
            @foreach (var integrante in Model.Integrantes)
            {
                <h4 data-target="#modalOpcoesIntegrantes" data-toggle="modal">&bull; @integrante.Nome</h4>
            }
        </div>

        <div id="quests">
            @for (int x = 0; x < Model.Grupo.Quests.Count; x++)
            {
                <div class="quest-container icon-black questlist-g">
                    <i class="fa fa-circle bull" aria-hidden="true"></i>
                    <a href="@Html.LinkId("/CriarQuest/Grupo/"+Model.Grupo.Quests.ToList()[x].Id)"><h4 class="quest-container">@Model.Grupo.Quests.ToList()[x].Nome</h4></a>
                </div>
            }
        </div>
	</div>
</section>

<hr class="container quebra">

@Html.Partial("_AdicionarIntegrantePartial", Model.AdicionarIntegranteViewModel(Model.Grupo.Id))

<div class="modal fade" id="modalOpcoesIntegrantes" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<form id="formAdicionarIntegrante">
				<div class="modal-body flex-properties-g">
					<input id="ExcluirIntegrante" type="submit" class="btn btn-secondary btn-cg" value="Excluir Integrante">
					<input id="PermissaoIntegrante" type="submit" class="btn btn-secondary btn-cg" value="Tornar Administrador">
				</div>
			</form>
		</div>
	</div>
</div>